name: PR Target Branch Check

on:
  pull_request:
    types: [opened, edited, synchronize, reopened]
    branches:
      - master

jobs:
  check-target-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Verify PR follows branch strategy
        run: |
          echo "ğŸ” Checking PR branch strategy..."
          echo "Base branch: ${{ github.base_ref }}"
          echo "Head branch: ${{ github.head_ref }}"
          
          if [[ "${{ github.base_ref }}" == "master" && "${{ github.head_ref }}" != "dev" ]]; then
            echo ""
            echo "âŒ ERROR: PRs to 'master' must come from 'dev' branch only!"
            echo ""
            echo "ğŸ“‹ Correct workflow:"
            echo "   1. Create PR: feature-branch â†’ dev"
            echo "   2. After testing: dev â†’ master"
            echo ""
            exit 1
          fi
          
          echo "âœ… Branch strategy is correct!"